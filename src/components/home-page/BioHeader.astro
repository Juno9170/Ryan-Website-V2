---
import Picture from "astro/components/Picture.astro";
import FallbackHeadshot from "../assets/FallbackHeadshot.jpg";

interface BiographySection {
  headshot: {
    alt: string;
    url: string;
  };
  biography: string;
}

interface MyQueryResponse {
  data: {
    biographySection: BiographySection;
  };
}

const response = await fetch("https://graphql.datocms.com/", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    Accept: "application/json",
    Authorization: `Bearer ${import.meta.env.DATOCMS_API_KEY}`,
  },
  body: JSON.stringify({
    query: `query MyQuery {
      biographySection {
      headshot {
        alt
        url
      }
      biography
    }
    }`,
  }),
});
const json: MyQueryResponse = await response.json();
const biography: string = json.data.biographySection.biography;
const src: string = json.data.biographySection.headshot.url;
const alt: string = json.data.biographySection.headshot.alt || "headshot image";
---

<div class="h-screen px-10 xl:px-16 flex flex-col md:flex-row relative">
  <div class="flex-1 pt-32 xl:pt-40 xxl:pt-52 xxxl:pt-80">
    <div
      class="text-3xl xl:text-5xl xxl:text-6xl xxxl:text-8xl text-[#585A4E]"
      style={{ textShadow: "0px 5px 10px #00000040" }}
    >
      Hello, I'm <span class="font-AndersonBolder">Ryan Zhu,</span> a <span
        class="font-AndersonBolder">Computer Science Student</span
      >
    </div>
    <div
      class="xl:text-xl xxl:text-2xl xxxl:text-4xl font-AndersonLight pt-10 xl:pr-24 xxl:pr-40 xxl:pt-20"
      style={{ textShadow: "2px 2px #ffffff" }}
    >
      {biography}
    </div>
  </div>
  <div class="flex-1 flex justify-center items-center">
    <div class="w-2/3 xl:w-auto xl:h-auto">
      <Picture
        style={{ borderRadius: "12.5%" }}
        loading={"eager"}
        src={src}
        alt={alt}
        width={400}
        height={430}
      />
    </div>
  </div>
</div>
